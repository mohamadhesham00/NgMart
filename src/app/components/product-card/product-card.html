<div class="product-card border rounded shadow-sm mx-2 p-2" routerLink="/product/{{ product.id }}">
  <div class="card-wrapper relative overflow-hidden">
    <!-- Product image -->
    <div class="image-container">
      <img
        [src]="currentImage"
        [alt]="product.title"
        class="w-full rounded product-image"
        (mouseenter)="onMouseEnter()"
        (mouseleave)="onMouseLeave()"
      />

      <!-- Availability Tag -->
      <p-tag
        [value]="product.availabilityStatus"
        [severity]="_productUiHelper.getSeverity(product.availabilityStatus)"
        class="status-tag"
      />

      <!-- Floating Buttons -->
      <div class="action-buttons">
        <p-button
          icon="pi pi-heart"
          class="action-btn"
          severity="secondary"
          rounded="true"
          [outlined]="true"
        />
        <p-button
          icon="pi pi-shopping-cart"
          class="action-btn"
          [disabled]="!isUserLogged"
          (click)="addToCart($event)"
          rounded="true"
        />
      </div>
    </div>
  </div>

  <!-- Product Info -->
  <div class="mt-3 font-bold text-sm product-info">
    {{ product.title | slice : 0 : 30 }}
    <span *ngIf="product.title.length > 30">...</span>
  </div>
  <div class="mt-1 row justify-content-start">
    <div class="col-12 col-sm-6 w-auto">
      <h5 class="text-danger text-lg font-semibold mx-0">
        {{ '$' + product.price }}
      </h5>
    </div>
    <div class="col-12 col-sm-6 w-auto px-3 p-sm-0">
      <small class="line-through text-secondary" *ngIf="product.discountPercentage">
        {{ '$' + (product.price / (1 - product.discountPercentage / 100)).toFixed(2) }}
      </small>
    </div>
  </div>

  <div class="flex justify-between items-center mt-2">
    <p-rating [(ngModel)]="product.rating" readonly="true" />
  </div>
</div>
